github:
  prebuilds:
    pullRequestsFromForks: true
    addComment: true

image: public.ecr.aws/jsii/superchain:1-buster-slim-node18

tasks:
  - init: |
        (
          set -e
          yarn install
          export NODE_OPTIONS=--max-old-space-size=8192
          # pre-build packages
          npx lerna run build --scope=aws-cdk-lib --scope=@aws-cdk-testing/framework-integ --skip-nx-cache
        )

vscode:
  extensions:
    - dbaeumer.vscode-eslint
    - https://github.com/aws/aws-toolkit-vscode/releases/download/amazonq%2Fv1.4.0/amazon-q-vscode-1.4.0.vsix
